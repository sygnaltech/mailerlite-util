
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>MailerLite Pop-Up Utils</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css" rel="stylesheet" type="text/css" />

    <!-- MailerLite Universal -->
    <!-- IMPORTANT, INSERT YOUR OWN MAILERLITE POP-UP SCRIPT HERE -->
    <!-- configure it to display on all sites, or to include e.g. http://localhost:80 or whatever you've configured for local testing '-->
    <script>
        (function (m, a, i, l, e, r) {
            m['MailerLiteObject'] = e; function f() {
                var c = { a: arguments, q: [] }; var r = this.push(c); return "number" != typeof r ? r : f.bind(c.q);
            }
            f.q = f.q || []; m[e] = m[e] || f.bind(f.q); m[e].q = m[e].q || f.q; r = a.createElement(i);
            var _ = a.getElementsByTagName(i)[0]; r.async = 1; r.src = l + '?v' + (~~(new Date().getTime() / 1000000));
            _.parentNode.insertBefore(r, _);
        })(window, document, 'script', 'https://static.mailerlite.com/js/universal.js', 'ml');

        var ml_account = ml('accounts', '2984599', 'v5n8h6f4z5', 'load');
    </script>
    <!-- End MailerLite Universal -->

</head>
<body>

    <section class="section">
        <div class="container">
            <h1 class="title">
                MailerLite Pop-ups demo <span data-value="mailerLiteUtilVersion"></span>
            </h1>
            <p class="subtitle">
                by Sygnal Technology Group
            </p>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="content">

                <h2>Using the demo</h2>

                <ol>
                    <li>A pop-up will appear</li>
                    <li>Close it</li>
                    <li>Click the button to re-open it</li>
                </ol>

                <div>

                    <button class="button is-black" id="button1">Re-open closed pop-ups</button>

                    <button class="button is-black" id="button2" style="">Re-open closed pop-ups ( auto-hiding button )</button>

                </div>

                <br />

                <h3>Helper functions</h3>

                <ul>
                    <li>mailerLitePopupsCount() = <span data-value="mailerLitePopupsCount">(undefined)</span></li>
                    <li>mailerLitePopupsExist() = <span data-value="mailerLitePopupsExist">(undefined)</span></li>
                </ul>

                <p><b>There are <span id="popupCount">(count)</span> MailerLite popups detected.</b></p>

            </div>
        </div>
    </section>


    <section class="section">
        <div class="container">
            <div class="content">

                <h2>Setting up the demo</h2>

                <ol>
                    <li>Paste in your mailerlite configuration into the HEAD section, replacing the one there.</li>
                    <li>Build a <b>pop-up promotion</b> in mailer lite</li>
                    <li>Configure the pop-up to show every time, so that you can refresh the page to re-display it.</li>
                    <li>Configure it to show on all sites, or specifically target it to your demo hosting location <i>as your web browser sees it</i>.<br/>
                    e.g. http://localhost:81</li>
                </ol>

            </div>
        </div>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript" crossorigin="anonymous"></script>
    <script src="../../dist/mailerlite-util.js"></script>

    <script>

        // Instantiate MailerLiteUtil object
        var mailerLite = new MailerLiteUtil({
            logging: true, // enable logging to console
        });

        $(function () {

            refreshUI();
            setInterval(
                function () {
                    refreshUI();
                },
                500  // 0.5 sec refresh
            );

            // Display MailerLiteUtil version
            $("*[data-value='mailerLiteUtilVersion']").text(
                mailerLite.getVersion()
            );

        });

        // Re-open all popups on Button 1 click
        $("#button1").click(function () {
            mailerLite.reOpenAllPopups();
        });

        // Re-open all popups on Button 1 click
        $("#button2").click(function () {
            mailerLite.reOpenAllPopups();
        });

        function refreshUI() {

            // Display popup count
            $("*[data-value='mailerLitePopupsCount']").text(
                mailerLite.popupsCount()
            );

            // Display whether any popups were found
            $("*[data-value='mailerLitePopupsExist']").text(
                mailerLite.popupsExist()
            );

            // Hide/show the button accordingly
            $("#button2").css("visibility",
                mailerLite.popupsExist() ? "visible" : "hidden");

        }

    </script>

</body>
</html>

